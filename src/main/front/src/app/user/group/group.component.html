<div class="container">

  <div class="row">

    <div class="col-sm-5">

      <div class="card">

        <div class="card-header">
          <div class="d-flex">
            <div>
              Groups
            </div>
            <div class="ml-auto">
              <a class="link" (click)="addGroup()"><i class="fas fa-plus-circle"></i>
              </a>
            </div>
          </div>
        </div>

        <div class="table-wrapper-scroll-y my-custom-scrollbar" >
          <table class="table mb-0 table-hover">
            <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Name</th>
              <th scope="col"></th>
              <th scope="col"></th>
              <th scope="col"></th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let group of groups; let i = index" >
              <td>{{i+1}}</td>
              <td>{{group.name}}</td>
              <td ><button class="btn" type="button" (click)="groupSelected(group);"><i class="fas fa-eye"></i></button>
              <td ><button class="btn" type="button" (click)="editGroup(i);"><i class="fas fa-edit"></i></button>
              <td ><button class="btn" type="button" (click)="deleteGroup(group.id);"><i class="fas fa-trash"></i></button>
              </td>
            </tr>
            </tbody>
          </table>
        </div>


      </div>



    </div>

    <div class="col">

      <div class="card">

        <div class="card-header">
          <div class="d-flex">
            <div>
              Roles
            </div>
            <div class="ml-auto">
              <a *ngIf="viewGroup" class="link" (click)="addGroupRole()" ><i class="fas fa-plus-circle"></i>
              </a>
            </div>
          </div>
        </div>

        <div class="table-wrapper-scroll-y my-custom-scrollbar" >
          <table class="table mb-0 table-hover">
            <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Name</th>
              <th scope="col"></th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let role of rolesAdded; let i = index" >
              <td>{{i+1}}</td>
              <td>{{role.name}}</td>
              <td ><button class="btn" type="button" (click)="deleteRole(role.id);"><i class="fas fa-trash"></i></button>
            </tr>
            </tbody>
          </table>
        </div>

      </div>

    </div>

  </div>

  <ng-template #content let-c="close" let-d="dismiss">

    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">{{modalTitle}}</h5>

    </div>

    <div class="modal-body">

      <form *ngIf="addingGroup || editingGroup" [formGroup]="groupForm"  (ngSubmit)="onSubmit()">
        <div class="form-label-group">
          <label for="name">Name</label>
          <input type="text" id="name" class="form-control" [formControlName]="'name'">
        </div>

        <hr>
        <button class="btn-sm btn-primary text-uppercase" type="submit">Save</button>
      </form>

      <form *ngIf="endPointAdding" [formGroup]="roleForm"  (ngSubmit)="onSubmitEnd()">
        <div class="form-label-group">
          <select multiple class="form-control" id="endPointsSelect" [formControlName]="'roleSelect'">
            <option *ngFor="let role of roles"
                    [value]="role.id"> {{role.name}} </option>
          </select>
        </div>

        <hr>
        <button class="btn-sm btn-primary text-uppercase" type="submit">Add</button>
      </form>



    </div>

  </ng-template>
</div>
